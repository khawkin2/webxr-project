<html>
  <head>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
</head>
  <body>
    <a-scene>
      <a-assets>
        <img id="bird" src="./images/bird.png">
        <img id="leaf" src="./images/leaf.png" />
        <img id="squirrel" src="./images/squirrel.png" />
        <img id="groundTexture" src="https://cdna.artstation.com/p/assets/images/images/016/042/456/large/cgshare-book-grass-003.jpg">

        <!-- COLOUR PALETTE

          Green   : #B2AC88 
          L. Blue : #A4C8D5
          D. Blue : #80ADBC
          Brown   : #CAB08B
          Orange  : #E0B394
          Pink    : #E9BDBE

        -->
      </a-assets>
      <a-camera>
        <a-cursor></a-cursor>
      </a-camera>
      <a-image
        color="#E9BDBE" src="#bird" position="-5 2 -5" rotation="0 0 0" scale="2 2 2" id="bird-1"
        animation__position="property: object3D.position.y; to: 2.2; dir: alternate; dur: 2000; loop: true"
        animation__mouseenter="property: scale; to: 2.3 2.3 2.3; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 2 2 2; dur: 300; startEvents: mouseleave">
      </a-image> 

      <a-image
        color="#E0B394" src="#leaf" position="0 2 -5" rotation="0 0 0" scale="2 2 2" id="leaf-1"
        rotate__colour="event: click"
        animation__position="property: object3D.position.y; to: 2.2; dir: alternate; dur: 2000; loop: true"
        animation__mouseenter="property: scale; to: 2.3 2.3 2.3; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 2 2 2; dur: 300; startEvents: mouseleave">
      </a-image>

      <a-image
        color="#CAB08B" src="#squirrel" position="5 2 -5" rotation="0 0 0" scale="2 2 2" id="squirrel-1"
        animation__position="property: object3D.position.y; to: 2.2; dir: alternate; dur: 2000; loop: true"
        animation__mouseenter="property: scale; to: 2.3 2.3 2.3; dur: 300; startEvents: mouseenter"
        animation__mouseleave="property: scale; to: 2 2 2; dur: 300; startEvents: mouseleave">
      </a-image>

      <a-sky color="#A4C8D5"></a-sky>

      <a-plane src="#groundTexture" rotation="-90 0 0" width="30" height="30" repeat="10 10"></a-plane>

      <!-- <a-light type="ambient" color="#445451"></a-light>
      <a-light type="point" intensity="2" position="2 4 4"></a-light> 
      <a-sound src="https://cdn.aframe.io/basic-guide/audio/backgroundnoise.wav" autoplay="true"
        position="-3 1 -4">
      </a-sound> -->
    </a-scene>
  </body>
</html>
<script>
  var componentData = {
    schema: {
      to: {default: '2.5 2.5 2.5', type: 'vec3'}
    },

    init: function () {
      console.log("initializing component");

      var data = this.data;
      var el = this.el;
      this.el.addEventListener('mouseenter', function () {
        el.object3D.scale.copy(data.to);
      });

      this.el.addEventListener('mousedown', function () {
        console.log("mousedown");
        rotateColour(this.el);
      });

      this.el.addEventListener('mouseup', function () {
        console.log("mouseup");
        rotateColour(this.el);
      });

      this.el.addEventListener('click', function () {
        console.log("click");
        rotateColour(this.el);
      });
    },

    rotateColour: function(el) {
      console.log("rotating colour");
      var colour = el.style.color;
        switch(colour){
          case "#B2AC88" :
            document.documentElement(el).style.color = "#A4C8D5";
            break;

          case "#A4C8D5" :
            document.documentElement(el).style.color = "#80ADBC";
            break;

          case "#80ADBC" :
            document.documentElement(el).style.color = "#CAB08B";
            break;

          case "#CAB08B" :
            document.documentElement(el).style.color = "#E0B394";
            break;

          case "#E0B394" :
            document.documentElement(el).style.color = "#E9BDBE";
            break;
          
          case "#E9BDBE" :
            document.documentElement(el).style.color = "#808080";
            break;
          
          default: 
            document.documentElement(el).style.color = "#B2AC88";
            break;
        }
    }
  }

  AFRAME.registerComponent('rotate__colour', componentData);

</script>
